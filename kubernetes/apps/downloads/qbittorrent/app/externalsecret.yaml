---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: gluetun-secret
spec:
  target:
    deletionPolicy: Delete
    template:
      type: Opaque
      data:
        OPENVPN_USER: "{{ .OPENVPN_USER }}"
        OPENVPN_PASSWORD: "{{ .OPENVPN_PASSWORD }}"
        SERVER_COUNTRIES: "{{ .OPENVPN_COUNTRY }}"
  data:
    - secretKey: OPENVPN_USER
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 33c47e40-c773-435a-8282-b12e014cfe45
        property: vpn_user
    - secretKey: OPENVPN_PASSWORD
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 33c47e40-c773-435a-8282-b12e014cfe45
        property: vpn_pass
    - secretKey: OPENVPN_COUNTRY
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 33c47e40-c773-435a-8282-b12e014cfe45
        property: vpn_country
