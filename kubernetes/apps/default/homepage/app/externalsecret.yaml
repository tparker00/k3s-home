---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: homepage-secret
spec:
  target:
    deletionPolicy: Delete
    template:
      type: Opaque
      data:
        ## Non Cluster resources
        HOMEPAGE_VAR_CLOUDFLARED_ACCOUNTID: "{{ .cloudflare_accountid }}"
        HOMEPAGE_VAR_CLOUDFLARED_TUNNELID: "{{ .cloudflare_tunnelid }}"
        HOMEPAGE_VAR_CLOUDFLARED_API_TOKEN: "{{ .cloudflare_key }}"
        HOMEPAGE_VAR_PIHOLE_TOKEN: "{{ .pihole_token }}"
        ## Default
        HOMEPAGE_VAR_HASS_TOKEN: "{{ .hass_token }}"
        ## Downloads
        HOMEPAGE_VAR_MYLAR_TOKEN: "{{ .mylar_token }}"
        HOMEPAGE_VAR_RADARR_TOKEN: "{{ .radarr_token }}"
        HOMEPAGE_VAR_SABNZBD_TOKEN: "{{ .sabnzbd_token }}"
        HOMEPAGE_VAR_SONARR_TOKEN: "{{ .sonarr_token }}"
        ## Media
        HOMEPAGE_VAR_OVERSEERR_TOKEN: "{{ .overseerr_token }}"
        HOMEPAGE_VAR_PLEX_TOKEN: "{{ .plex_token }}"
        HOMEPAGE_VAR_TAUTULLI_TOKEN: "{{ .tautulli_token }}"
        HOMEPAGE_VAR_KAVITA_USERNAME: "{{ .kavita_username }}"
        HOMEPAGE_VAR_KAVITA_PASSWORD: "{{ .kavita_password }}"
        ## Monitoring
        HOMEPAGE_VAR_GRAFANA_USERNAME: "{{ .grafana_username }}"
        HOMEPAGE_VAR_GRAFANA_PASSWORD: "{{ .grafana_password }}"
        ## Security
        HOMEPAGE_VAR_AUTHENTIK_TOKEN: "{{ .authentik_token }}"
  data:
    ## Non Cluster
    - secretKey: cloudflare_accountid
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 27b8185c-98eb-415c-955e-b10900ebd76c
        property: account_id
    - secretKey: cloudflare_tunnelid
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 27b8185c-98eb-415c-955e-b10900ebd76c
        property: tunnel_id
    - secretKey: cloudflare_key
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 27b8185c-98eb-415c-955e-b10900ebd76c
        property: api_token
    ## Default
    - secretKey: hass_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 31f632f8-013e-4413-818a-b10900ed2c97
        property: token
    ## Downloads
    - secretKey: mylar_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: c4e370ef-cc39-457a-a197-b10900ee2c8d
        property: token
    - secretKey: radarr_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 5b82ac2c-9c1d-4afe-97e5-b10800445be1
        property: token
    - secretKey: sabnzbd_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: e1573528-4f31-4b39-ba7e-b1080049e580
        property: api_token
    - secretKey: sonarr_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 49e66475-bf8d-437b-9df0-b107000cb249
        property: token
    ## Media
    - secretKey: overseerr_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 1763bbd3-5a05-4052-81d5-b10900f521ff
        property: token
    - secretKey: plex_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 557de7c6-1ee4-4ef5-9eaa-b10900f5c0ff
        property: token
    - secretKey: tautulli_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: "9bd4b81b-8ca5-47c3-83c8-b10900f6266c"
        property: k8s_token
    ## Monitoring
    - secretKey: grafana_username
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
      remoteRef:
        key: cb990ba1-5876-4130-837e-b10900f65445
        property: username
    - secretKey: grafana_password
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
      remoteRef:
        key: cb990ba1-5876-4130-837e-b10900f65445
        property: password
    ## Security
    - secretKey: authentik_token
      sourceRef:
        storeRef:
          name: bitwarden-fields
          kind: ClusterSecretStore
      remoteRef:
        key: 680bb6bb-5734-406c-a72f-b10900f669c8
        property: token
    - secretKey: kavita_username
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
      remoteRef:
        key: 05c2a116-372e-49d4-acf5-b1090157c8f8
        property: username
    - secretKey: kavita_password
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
      remoteRef:
        key: 05c2a116-372e-49d4-acf5-b1090157c8f8
        property: password
